---
// --- Default Imports ---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

// --- New Imports for Blog Posts ---
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

// --- Get All Posts ---
const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.valueOf()
);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<div class="hero-intro" style="margin-bottom: 2rem;">
				<h1 style="font-size: 3.5rem; margin-bottom: 1.5rem; line-height: 1.1;">
					Let's look beyond the 
					<span style="color: var(--accent);">how.</span>
					</br>
					And understand the
					<span style="color: var(--accent);">why.</span>
				</h1>
			</div>

      <div class="hero-mission" style="border-top: 1px solid var(--secondary-bg); border-bottom: 1px solid var(--secondary-bg); padding: 2.5rem 0;">
        <h2 style="margin-top: 0; margin-bottom: 1rem; color: var(--accent);">My Philosophy</h2>
        <p style="font-size: 1.25rem; color: rgb(var(--gray)); margin: 0;">
        This blog isn't about <em>how</em> to use a framework. It's about <em>why it exists</em> in the first place. This is my attempt to go beyond the syntax to explore the <em>first principles</em>, the core, the fundamentals that we usually miss.
          <br /></p>
      </div>

      <div class="hero-note" style="margin-top: 2.5rem;">
        <h2 style="margin-top: 0; margin-bottom: 1rem;">My Motivation</h2>
        <p style="font-size: 1.1rem; color: rgb(var(--gray));">
          I'm on this journey right alongside you. When I first learned to fetch data, I understood <em>how</em> to use <code>fetch('/api/user')</code>. I knew the syntax.
        </p>
        <p style="font-size: 1.1rem; color: rgb(var(--gray));">
          But I had so many questions:
        </p>

        <ul style="font-size: 1.1rem; color: rgb(var(--gray)); margin-bottom: 1.5rem; list-style-type: disc; padding-left: 2em;">
          <li>
            Why was HTTP designed to be <em>stateless</em>? </li><li>Why did that one decision force an entire industry to invent solutions like cookies and tokens just to build a simple shopping cart?
          </li>
          <li>
            What was so broken about <em>HTTP/1.1 </em> that it required a total redesign with <em>HTTP/2</em>?
          </li>
          <li>
			What was there before HTTP?</li><li> Which problem did HTTP solve? </li><li>How did information transfer happen before it?
          </li>
          <li>
			Why this? Why that? Why?
          </li>
        </ul>

        <p style="font-size: 1.1rem; color: rgb(var(--gray));">
          This blog is my process of answering those "why" questions. It's not about re-learning frameworks, it's about connecting the dots on the work we're <em>already</em> doing.
        </p>
        <p style="font-size: 1.1rem; color: rgb(var(--gray));">
          If you're the kind of person who also asks "why," I hope you'll find these posts helpful. Enjoy the read.
        </p>
      </div>

      <h2 style="margin-top: 3rem; margin-bottom: 1.5rem; padding-top: 2rem; border-top: 1px solid var(--secondary-bg);">
        All Posts
      </h2>

			<div class="post-grid" style="display: grid; grid-template-columns: 1fr; gap: 1rem;">
				{
					posts.map((post) => (
						<a href={`/blog/${post.id}/`} class="revolving-card">
							
              <h4 class="title" style="margin-bottom: 0.5rem; font-size: 1.75rem;">
								{post.data.title}
							</h4>
							
              <p style="font-size: 0.9rem; color: var(--gray); margin: 0;">
								<FormattedDate date={post.data.pubDate} />
							</p>

						</a>
					))
				}
			</div>

      </main>
		<Footer />
	</body>
</html>